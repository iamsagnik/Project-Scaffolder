{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "SGMTR Forward V1 Schema",
  "description": "Generator-driven SGMTR schema for forward project generation",
  "type": "object",

  "definitions": {
    "meta": {
      "type": "object",
      "required": ["generator"],
      "properties": {
        "generator": { "type": "string", "minLength": 1 },
        "variant": { "type": "string", "minLength": 1 },
        "options": { "type": "object" },
        "standard": { "type": "string", "minLength": 1 },
        "overwrite": { "type": "boolean" },
        "encoding": { "type": "string", "minLength": 1 },
        "permissions": { "type": "string", "pattern": "^[0-7]{3,4}$" }
      },
      "additionalProperties": false
    },

    "fileNodeGenerated": {
      "type": "object",
      "required": ["$meta"],
      "properties": {
        "$meta": { "$ref": "#/definitions/meta" }
      },
      "additionalProperties": false
    },

    "fileNodeEmpty": {
      "type": "null"
    },

    "fileNode": {
      "oneOf": [
        { "$ref": "#/definitions/fileNodeGenerated" },
        { "$ref": "#/definitions/fileNodeEmpty" }
      ]
    },

    "folderNode": {
      "type": "object",
      "additionalProperties": {
        "oneOf": [
          { "$ref": "#/definitions/fileNode" },
          { "$ref": "#/definitions/folderNode" }
        ]
      }
    }
  },

  "additionalProperties": {
    "oneOf": [
      { "$ref": "#/definitions/fileNode" },
      { "$ref": "#/definitions/folderNode" }
    ]
  }
}